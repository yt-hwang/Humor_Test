import { questions } from "./questions";

export interface GagResult {
  code: string;
  nickname: string;
  summary: string;
  description: string;
  examples: string[];
}

export interface AxisScores {
  OI: number; // Organized vs Improvised
  NB: number; // Natural vs Abstract  
  VP: number; // Verbal vs Physical
  BD: number; // Bright vs Dark
}

// 16Í∞ÄÏßÄ Í∞úÍ∑∏Ïú†Ìòï Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞
export const gagResults: Record<string, GagResult> = {
  // üíõ Î∂ÑÏúÑÍ∏∞Î©îÏù¥Ïª§Ìòï
  ONVB: {
    code: "ONVB",
    nickname: "ÌÜ†ÌÅ¨ÎßàÏä§ÌÑ∞",
    summary: "Í≥ÑÌöçÌïú ÎåÄÎ≥∏Í≥º ÎßêÏÑºÏä§Î°ú Î∂ÑÏúÑÍ∏∞Î•º ÎùÑÏõå ÌÅ¨Í≤å Î™∞ÏûÖÏùÑ Ïú†ÎèÑÌïòÎäî ÌÜ†ÌÅ¨ÏáºÌòï Í∞úÍ∑∏Ïôï",
    description: `ÏÑ¨ÏÑ∏Ìïú ÎßêÏû•ÎÇú + Í≤∞Ï†ïÏ†Å ÌÉÄÏù¥Î∞çÏúºÎ°ú ÏõÉÏùåÏùÑ Ïú†Î∞ú.\nÎ≥º Îïå: "Ïù¥Í±∞ ÎÇ¥ ÏñòÍ∏∞Ïïº„Öã„Öã"\nÌï† Îïå: ÎåÄÎ≥∏ Ï∫°ÏäêÏ≤òÎüº ÏôÑÎ≤ΩÌïú Îßê ÌùêÎ¶Ñ Ïó∞Ï∂ú` ,
    examples: ["Ïú†Ïû¨ÏÑùÏãù ÌÜ†ÌÅ¨", "Ïç∞ Ìë∏Îäî ÌöåÏãù Ï≤úÏû¨", "SNLÏãù Î¶¨ÏñºÏÉÅÌô© ÏΩ©Ìä∏"]
  },
  ONPB: {
    code: "ONPB",
    nickname: "Ïß§ Ï†úÏ°∞Í∏∞",
    summary: "Ï†ïÍµêÌïòÍ≤å Í≥ÑÏÇ∞Îêú ÌëúÏ†ï¬∑Ï†úÏä§Ï≤òÎ°ú 'Ïß§'ÎßåÏúºÎ°úÎèÑ ÏõÉÍ∏∞Îäî ÌçºÌè¨Î®∏",
    description: `ÎààÎπõ¬∑Î™∏ÏßìÏúºÎ°ú ÏàúÎ∞úÎ†• ÏûàÎäî Í≥µÍ∞ê ÏûêÍ∑π.\nÎ≥º Îïå: "ÌëúÏ†ï ÌïòÎÇòÎ°ú ÏõÉÍ∏∞ÎÑ§„Öã„Öã"\nÌï† Îïå: Î¶¨ÌóàÏÑ§ ÌÜµÌï¥ ÌëúÏ†ï Ïä§ÌÑ∞Îîî` ,
    examples: ["ÌîºÏßÄÏª¨ ÏΩîÎØ∏Îîî", "ÏñºÍµ¥ ÌëúÏ†ïÏúºÎ°ú 'ÎàÑÍµ¨ÎÉê ÎÑå' ÎäêÎÇå"]
  },
  INVB: {
    code: "INVB",
    nickname: "Íµ≠ÎØºMC",
    summary: "Ï¶âÏÑù ÏÉÅÌô©ÏóêÏÑú Í∏∞ÎßâÌûå ÎßêÌÉÄÏù¥Î∞çÏúºÎ°ú ÎåÄÌôî Î∂ÑÏúÑÍ∏∞Î•º Ï£ºÎèÑÌïòÎäî ÏÑºÏä§Ìòï Î¶¨Ïï°ÌÑ∞",
    description: `ÎèåÎ∞ú Î©òÌä∏Î°ú ÏàúÌíçÏ≤òÎüº ÏõÉÏùå Î™∞ÏïÑÏπ®.\nÎ≥º Îïå: "ÌÉÄÏù¥Î∞ç ÏßÑÏßú Ï≤úÏû¨Îã§„Öã„Öã"\nÌï† Îïå: ÏÉÅÌô© Í∞êÏßÄ Ï¶âÏãú ÌïúÎ∞©` ,
    examples: ["Ïû¨ÏπòÏûàÎäî Î©òÌä∏", "ÏÑºÏä§ Ìè≠Î∞úÌòï", "ÌöåÏãù Ï≤úÏû¨"]
  },
  INPB: {
    code: "INPB",
    nickname: "Î¶¨Ïï°ÏÖò Ïû•Ïù∏",
    summary: "Ï¶âÌù• ÌëúÏ†ïÍ≥º Ïï°ÏÖòÏúºÎ°ú Î¶¨Ïñº Î∞òÏùëÏùÑ Ïß§Ï≤òÎüº ÎÇ®Í∏∞Îäî Í∞êÏÑ±Ìòï ÏàúÍ∞ÑÌè¨Ï∞© Í∞úÍ∑∏Ïù∏",
    description: `Î¶¨Ïñº ÌÉÄÏù¥Î∞çÏùò ÌëúÏ†ï ÏïïÍ∂å.\nÎ≥º Îïå: "Ïß§Î°ú ÎÇ®Í≤†ÎÑ§„Öã„Öã"\nÌï† Îïå: Ïπ¥Î©îÎùºÍ∞Ä ÏûàÎì† ÏóÜÎì† Î¶¨Ïï°ÏÖò ÌÑ∞Îú®Î¶º` ,
    examples: ["ÍπÄÏã†ÏòÅ Ïä§ÌÉÄÏùº", "Ïß§Ï≤òÎüº ÏõÉÍ∏∞Îäî ÌòÑÏã§ Î∞òÏùëÍæº"]
  },

  // ‚ù§Ô∏è Ìå©Ìè≠Ìòï
  ONVD: {
    code: "ONVD",
    nickname: "Í∞úÍ∑∏ ÎπÑÌèâÍ∞Ä",
    summary: "ÎÇ†Ïπ¥Î°úÏö¥ ÎÖºÎ¶¨ÏôÄ Ï†ïÏ†úÎêú ÎßêÎ°ú ÌòÑÏã§ÏùÑ Íº¨ÏßëÎäî ÎπÑÌåêÌòï ÌíçÏûêÍ∞Ä",
    description: `"ÏîÅÏì∏ÌïòÏßÄÎßå Ïù∏Ï†ï" ÏàúÍ∞Ñ ÏßÅÍ≤©.\nÎ≥º Îïå: "Í≥µÍ∞êÏùÄ Ïïà ÌïòÍ≥† Ïã∂ÏßÄÎßå‚Ä¶" ÎäêÎÇå\nÌï† Îïå: ÍººÍººÌïú ÎÖºÎ¶¨+Î¶¨Îì¨Í∞ê ÏûàÎäî ÏßÄÏ†Å` ,
    examples: ["ÍπÄÍ≤ΩÏßÑ Î∏îÎûôÌíçÏûêÏãù ÏΩ©Ìä∏", "Î©¥Ï†ëÏóêÏÑú Ïù¥Îü∞ ÏßàÎ¨∏ ÎÇòÏò¥"]
  },
  ONPD: {
    code: "ONPD",
    nickname: "Ìå®Îü¨Îîî Ïû•Ïù∏",
    summary: "ÎåÄÎ≥∏Í≥º Í∞êÏ†ï¬∑Ï†úÏä§Ï≤òÎ•º ÌôúÏö©Ìï¥ Ï£ºÎ≥ÄÏù∏ÏùÑ Ìå®Îü¨ÎîîÌïòÎ©∞ ÌíçÏûêÌïòÎäî Îßê Ïó∞Í∏∞ Ï†ÑÎ¨∏Í∞Ä",
    description: `"ÏïÑÏù¥ Î™©ÏÜåÎ¶¨ Ï†ÄÎ†áÍ≤å‚Ä¶?" ÌòÑÏã§ Í∞êÏ†ï Ìå®Îü¨Îîî.\nÎ≥º Îïå: "Ïù¥ Ïó∞Í∏∞ Îπ°ÏÑ∏Í≤å Ï§ÄÎπÑÌñàÎÑ§„Öã„Öã"\nÌï† Îïå: Í∞êÏ†ï+Ï†úÏä§Ï≤ò+ÌÜ§ Î™®Îëê Ïó∞Ï∂ú` ,
    examples: ["Í∞êÎèôÏ†ÅÏù∏ Ïû•Î©¥Ïù∏Îç∞ Ïôú ÏõÉÍ∏∞ÎÉê ÏãúÎ¶¨Ï¶à"]
  },
  INVD: {
    code: "INVD",
    nickname: "ÎîîÏä§Ïû•Ïù∏",
    summary: "Ï¶âÌù•Ï†Å Ìå©Ìè≠ÏúºÎ°ú Ïù∏ÏÉÅÏ†ÅÏù∏ ÎπÑÌåêÏùÑ ÌÑ∞Îú®Î¶¨Îäî ÏãúÎãàÏª¨ Ïû•Ïù∏",
    description: `ÎèåÏßÅÍµ¨+ÏõÉÏùå+ÏßÑÌïú Ï∞îÎ¶º.\nÎ≥º Îïå: "Ïù¥ ÌÉÄÏù¥Î∞ç ÏßÑÏßú Í∏∞Í∞Ä ÎßâÌûàÎÑ§"\nÌï† Îïå: ÏòàÏùò Í∞ñÏ∂îÎ©¥ÏÑúÎèÑ ÎÇ† ÏÑ† ÎπÑÌåê` ,
    examples: ["ÏÇ¨Ìöå ÌíçÏûêÌòï ÏòàÎä• Î¶¨Ïï°ÌÑ∞", "Ïã†ÎûÑÌïú ÏãúÏÇ¨ Î∞à ÏΩîÎ©òÌÑ∞Î¶¨"]
  },
  INPD: {
    code: "INPD",
    nickname: "ÎààÎ¨ºÍ∞úÍ∑∏Îü¨",
    summary: "Í≥µÍ∞êÍ≥º ÌíçÏûêÎ•º Ìï®Íªò ÎçòÏßÄÎ©∞ ÏàúÍ∞Ñ Í∞êÏ†ïÏÑ†ÏùÑ Ï∞åÎ•¥Îäî 'ÏõÉÌéë' ÌÑ∞Îú®Î¶ºÌòï",
    description: `ÎààÎ¨º ÏßÅÏ†Ñ ‚Üí Í∞êÏ†ï ÎàåÎ†ÄÎã§ ÌÑ∞Îú®Î¶º.\nÎ≥º Îïå: "Ïä¨ÌîÑÍ∏¥ ÌïúÎç∞‚Ä¶ ÏõÉÍ∏∞ÎÑ§"\nÌï† Îïå: Í∞êÏ†ï Î¶¨Îì¨ ÎÜìÏπòÏßÄ ÏïäÍ≥† ÌïúÎ∞©` ,
    examples: ["Ïó∞Í∏∞ÌïòÎäî Ï≤ôÌïòÎã§ Í∞ëÏûêÍ∏∞ ÏõÉÍ∏∞Îäî Î¶¨Ïñº Í∞êÏÑ±Ìåå"]
  },

  // üíô Ïª®ÏÖâÌòï
  OBVB: {
    code: "OBVB",
    nickname: "ÏÉÅÌô©Í∑π Ïû•Ïù∏",
    summary: "ÎÖºÎ¶¨Ï†Å Îß•ÎùΩ ÏïàÏóêÏÑú Î≥ëÎßõ ÏÑ∏Í≥ÑÍ¥ÄÏùÑ ÏπòÎ∞ÄÌïòÍ≤å ÏÑ§Î™ÖÌïòÎäî ÏáºÎß®",
    description: `"ÏßÑÏßú Í∞ôÏùÄÎç∞ ÏõÉÍ∏∞ÎÑ§" ÎäêÎÇå.\nÎ≥º Îïå: "Ïù¥ ÏÑ§Ï†ï ÎåÄÎã®ÌïòÎã§„Öã„Öã"\nÌï† Îïå: ÏÉÅÌô©Í∑π Ïä§ÌÅ¨Î¶ΩÌä∏ ÏôÑÏÑ±Ìòï ÏßÑÌñâ` ,
    examples: ["Î∞à ÏÑ§Î™Ö Ïª®ÌÖêÏ∏†", "Ïñ¥Î™ΩÏñ¥Ïä§ÏóêÏÑú Ïû°ÌûàÎäî Î£®Ìã¥Ïù¥Ïöî Í∞ôÏùÄ ÏÑ§Î™Ö"]
  },
  OBVD: {
    code: "OBVD",
    nickname: "Î∂ÄÏ°∞Î¶¨ ÏÑ§Í≥ÑÏûê",
    summary: "Î≥ëÎßõÏ†Å ÏÑ§Ï†ï ÏïàÏóêÏÑú Î∏îÎûô ÌíçÏûêÎ°ú ÎÇ†Ïπ¥Î°≠Í≤å ÌòÑÏã§ÏùÑ Íº¨ÏßëÎäî ÌòÑÏã§+ÎπÑÌòÑÏã§ Ïû•Ïù∏",
    description: `"Ïù¥ÏÉÅÌï¥ Î≥¥Ïù¥ÏßÄÎßå ÌòÑÏã§ Í∞ôÎã§" ÎäêÎÇå.\nÎ≥º Îïå: "Î≥ëÎßõÏù∏Îç∞, Ïù¥Í±∏ Î™∞ÏûÖÌïòÍ≤å ÌïòÎäî Îß§Î†•‚Ä¶"\nÌï† Îïå: Î≥ëÎßõ ÏÑ∏Í≥ÑÍ¥Ä Ï†ïÍµêÍµ¨Ï∂ï + ÌíçÏûê Îã®ÏÑú Ïã¨Í∏∞` ,
    examples: ["SNL ÌíçÏûêÍ∑π", "Îã§ÌÅ¨ Ïú†ÌÜ†ÌîºÏïÑÎ•ò Î∏îÎûôÏª®ÌÖêÏ∏†"]
  },
  OBPB: {
    code: "OBPB",
    nickname: "Ïª®ÏÖâÍ¥ëÎåÄ",
    summary: "Î∂ÑÏû•¬∑ÏÜåÌíà¬∑ÏÜåÎ¶¨ÍπåÏßÄ ÏôÑÎ≤ΩÌïú ÏÑ∏Í≥ÑÍ¥Ä ÌçºÌè¨Î®ºÏä§Î°ú Î≥ëÎßõÏùÑ ÏôÑÏÑ±",
    description: `"Ïò∑ÏóêÏÑú Î≠îÍ∞Ä Ïù¥ÏÉÅÌï®" ÎäêÎÇå.\nÎ≥º Îïå: "Ïª®ÏÖâ ÎÅùÎÇ¥Ï§ÄÎã§„Öã„Öã"\nÌï† Îïå: Ï†ÑÏ≤¥ ÏΩòÏÖâÌä∏ ÎåÄÎ≥∏¬∑ÏÜåÌíàÍπåÏßÄ Ï§ÄÎπÑ` ,
    examples: ["Ìå®Îü¨Îîî Ïú†ÌäúÎ≤Ñ", "BÍ∏â Í∞úÍ∑∏ ÏΩ©Ìä∏ ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞"]
  },
  OBPD: {
    code: "OBPD",
    nickname: "Î≥ëÎßõÍ¥ëÎåÄ",
    summary: "Î≥ëÎßõ ÏÑ§Ï†ï ÏïàÏóê Î¨òÌïú Í∞êÏ†ïÏùÑ Ïã¨Ïñ¥ÏÑú Ïä¨ÌéêÎäîÎç∞‚Ä¶. ÏõÉÍ≤®ÏßÄÎäî Í∞êÏÑ± Í∞úÍ∑∏Ïù∏",
    description: `Ïä¨Ìîî + Î≥ëÎßõÏùò Î¨òÌïú Í≥µÍ∞ê.\nÎ≥º Îïå: "Ïö∏Ïñ¥Ïïº ÌïòÎÇò, ÏõÉÏñ¥Ïïº ÌïòÎÇò‚Ä¶"\nÌï† Îïå: Í∞êÏÑ± Î£®Ìä∏ Ïã¨Í≥† Î∞òÏ†Ñ Î≥ëÎßõÏúºÎ°ú ÌÑ∞Îú®Î¶º` ,
    examples: ["Ïä¨Ìîà ÏÇ¨Ïó∞ ÎÇ≠ÎèÖÌïòÎã§ Ïù¥ÏÉÅÌïòÍ≤å ÏõÉÍ∏∞Îäî ÌòïÏãù"]
  },

  // üíú ÏòàÏ∏°Î∂àÍ∞ÄÌòï
  IBVB: {
    code: "IBVB",
    nickname: "Î≥ëÎßõÎ¶¨Ïï°ÏÖò Ïû•Ïù∏",
    summary: "Ï¶âÏÑùÏóêÏÑú Ïñ¥Ïù¥ÏóÜÎäî Î∞úÏñ∏ÏùÑ ÎçòÏ†∏ Î≥ëÎßõÏùÑ ÎßåÎì§Ïñ¥ÎÇ¥Îäî Î¨¥ÎåÄÌòï Î¶¨Ïï°ÌÑ∞",
    description: `"Í∞ëÏûêÍ∏∞ Ïù¥Í≤å Ïôú ÎÇòÏôÄ„Öã„Öã" ÎäêÎÇå.\nÎ≥º Îïå: "ÏßÑÏßÄÌïúÎç∞ ÎÑàÎ¨¥ ÏõÉÍ≤®‚Ä¶"\nÌï† Îïå: ÏàúÍ∞Ñ Îñ†Ïò§Î•∏ ÎßêÏùÑ ÏßÑÏßÄÌïòÍ≤å ÎçòÏßê` ,
    examples: ["ÎÖ∏ÌôçÏ≤† Ï¥àÍ∏∞ Ïä§ÌÉÄÏùº", "ÏïÑ Ïù¥Í±¥ ÎßêÏù¥ Ïïà ÎêòÏûñÏïÑÏöî~ Í∑ºÎç∞ Îê®„Öã„Öã"]
  },
  IBVD: {
    code: "IBVD",
    nickname: "ÎèÑÎ•∏Ïûê",
    summary: "Ï¶âÌù• Î≥ëÎßõ+ÌíçÏûê+ÌòºÎèàÏùÑ ÎèôÏãúÏóê ÌÑ∞Îú®Î¶¨Îäî Ï∂©Í≤© ÏΩ§ÎπÑ",
    description: `"Ìè≠Î∞úÏù∏Îç∞ Ï∞îÎ†§‚Ä¶" ÎäêÎÇå.\nÎ≥º Îïå: "Î¨¥ÎÖºÎ¶¨Ïù∏Îç∞ Í∏∞Í∞Ä ÎßâÌûå ÏßÑÏã§Ïù¥ ÏÑûÏòÄÎã§"\nÌï† Îïå: Î≥ëÎßõ+ÎπÑÌåê Îëò Îã§ ÏàúÍ∞Ñ ÌÑ∞ÏßÄÎ©¥ ÏõÉÍπÄ` ,
    examples: ["Ïú†Î≥ëÏû¨ Ìíç Î∏îÎûôÍ∞úÍ∑∏", "Í∞ëÏûêÍ∏∞ Ï†úÏ†ïÏã†Ïù∏Í∞Ä Ïã∂ÏùÄ ÏõÉÏùå"]
  },
  IBPB: {
    code: "IBPB",
    nickname: "Î™∏Í∞úÍ∑∏Í¥¥Ïßú",
    summary: "Ï¶âÌù• Ïä¨Îû©Ïä§Ìã±+Ï†úÏä§Ï≤ò+Ìö®Í≥ºÏùåÏúºÎ°ú Î¨ºÎ¶¨ Í∞úÍ∑∏ Ìè≠Î∞ú",
    description: `"Ïù¥Í≤å Í∞úÍ∑∏Ïïº‚Ä¶ ÏïÑÎãàÏïº‚Ä¶ Ïñ¥Ï©åÎùºÍ≥†„Öã„Öã" ÎäêÎÇå.\nÎ≥º Îïå: "Îßê Ïïà Ìï¥ÎèÑ ÏõÉÍ∏∞ÎÑ§"\nÌï† Îïå: Î™∏ÏúºÎ°ú ÏÉÅÌô©ÏùÑ Îã®Î≤àÏóê Î¨¥ÎÑàÎú®Î¶º` ,
    examples: ["Î™∏ÏúºÎ°ú ÎßêÌïòÎäî Ïú†ÌäúÎ≤Ñ", "Î∞òÏùëÌòï Î∞à Ï†úÏ°∞Í∏∞"]
  },
  IBPD: {
    code: "IBPD",
    nickname: "ÌòºÎèàÍ¥ëÎåÄ",
    summary: "Í∞êÏ†ï, Ïñ∏Ïñ¥, Î≥ëÎßõ, ÌíçÏûêÍ∞Ä Ìè≠Î∞úÏ†ÅÏúºÎ°ú ÏÑûÏù∏ ÌôîÎ†§Ìïú Í∞úÍ∑∏ ÏïÑÌä∏ÌîºÏä§",
    description: `"Î≠îÏßÄ Î™®Î•¥Í≤†ÎäîÎç∞ ÎØ∏ÏπúÎìØ ÏõÉÍ∏∞ÎÑ§" ÎäêÎÇå.\nÎ≥º Îïå: "Ïù¥Îü∞ ÌòºÎèàÏù¥ ÏÑ±ÏßÄÍ∏â Ïû¨ÎØ∏ÎÑ§"\nÌï† Îïå: Î¨¥Í≥ÑÌöçÏù¥ÎùºÍ≥† Ï≤¥Í∞êÌïú Ï¶âÌù•+Í∞êÏ†ï ÎßàÍµ¨ Ìè≠Î∞ú` ,
    examples: ["ÌôçÏßÑÍ≤Ω", "Ïû•ÎèÑÏó∞Ïãù Í∏âÎ∞úÏßÑ Í∞êÏÑ±Í∞úÍ∑∏"]
  },
};

// ÎãµÎ≥ÄÏùÑ Í∏∞Î∞òÏúºÎ°ú Ï∂ïÎ≥Ñ Ï†êÏàò Í≥ÑÏÇ∞
export function calculateAxisScores(answers: (number | null)[]): AxisScores {
  const scores: AxisScores = { OI: 0, NB: 0, VP: 0, BD: 0 };
  const counts = { OI: 0, NB: 0, VP: 0, BD: 0 };
  
  // Í∞Å Ï∂ïÎ≥ÑÎ°ú Ï†êÏàò Ìï©ÏÇ∞
  answers.forEach((answer, index) => {
    if (answer !== null) {
      const question = questions[index];
      const axis = question.axis as keyof AxisScores;
      // reverseÍ∞Ä trueÎ©¥ 8-answerÎ°ú Ï†êÏàò Í≥ÑÏÇ∞
      const score = question.reverse ? 8 - answer : answer;
      scores[axis] += score;
      counts[axis]++;
    }
  });
  
  // ÌèâÍ∑† Í≥ÑÏÇ∞ (1-7Ï†ê Ï≤ôÎèÑÏóêÏÑú 4Ï†êÏùÑ Í∏∞Ï§ÄÏúºÎ°ú)
  Object.keys(scores).forEach((axis) => {
    const axisKey = axis as keyof AxisScores;
    if (counts[axisKey] > 0) {
      scores[axisKey] = scores[axisKey] / counts[axisKey];
    }
  });
  
  return scores;
}

// Ï∂ïÎ≥Ñ Ï†êÏàòÎ•º Í∏∞Î∞òÏúºÎ°ú Í∞úÍ∑∏Ïú†Ìòï ÏΩîÎìú ÏÉùÏÑ±
export function getGagTypeCode(scores: AxisScores): string {
  const code = [
    scores.OI > 4 ? "O" : "I", // Organized vs Improvised
    scores.NB > 4 ? "B" : "N", // Natural vs Abstract
    scores.VP > 4 ? "V" : "P", // Verbal vs Physical
    scores.BD > 4 ? "B" : "D"  // Bright vs Dark
  ].join("");
  
  return code;
}

// Ï†ÑÏ≤¥ Í≤∞Í≥º Í≥ÑÏÇ∞ Ìï®Ïàò
export function calculateResult(answers: (number | null)[]): GagResult {
  const scores = calculateAxisScores(answers);
  const code = getGagTypeCode(scores);
  return gagResults[code] || gagResults["ONVB"]; // Í∏∞Î≥∏Í∞í
} 